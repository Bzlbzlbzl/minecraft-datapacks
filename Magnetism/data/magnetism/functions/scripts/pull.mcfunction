#The function that gets called on all players (when %magnetism is 1)

#X Pos; gets position values, subtracts for distance, then stores to nearby entity current motion
execute store result score @s magnetism_dist run data get entity @s Pos[0] 100
execute as @e[distance=..8,type=!minecraft:player,type=!minecraft:falling_block,type=!#minecraft:arrows,type=!minecraft:fishing_bobber,type=!minecraft:ender_pearl,type=!minecraft:eye_of_ender,type=!minecraft:experience_bottle,type=!minecraft:potion,type=!#minecraft:impact_projectiles,type=!minecraft:firework_rocket,type=!minecraft:llama_spit,type=!minecraft:shulker_bullet,type=!minecraft:painting,type=!minecraft:item_frame,type=!minecraft:area_effect_cloud] store result score @s magnetism_dist run data get entity @s Pos[0] 100
scoreboard players operation @e[distance=..8,type=!minecraft:player,type=!minecraft:falling_block,type=!#minecraft:arrows,type=!minecraft:fishing_bobber,type=!minecraft:ender_pearl,type=!minecraft:eye_of_ender,type=!minecraft:experience_bottle,type=!minecraft:potion,type=!#minecraft:impact_projectiles,type=!minecraft:firework_rocket,type=!minecraft:llama_spit,type=!minecraft:shulker_bullet,type=!minecraft:painting,type=!minecraft:item_frame,type=!minecraft:area_effect_cloud] magnetism_dist -= @s magnetism_dist
execute as @e[distance=..8,type=!minecraft:player,type=!minecraft:falling_block,type=!#minecraft:arrows,type=!minecraft:fishing_bobber,type=!minecraft:ender_pearl,type=!minecraft:eye_of_ender,type=!minecraft:experience_bottle,type=!minecraft:potion,type=!#minecraft:impact_projectiles,type=!minecraft:firework_rocket,type=!minecraft:llama_spit,type=!minecraft:shulker_bullet,type=!minecraft:painting,type=!minecraft:item_frame,type=!minecraft:area_effect_cloud] store result entity @s Motion[0] double -0.0015 run scoreboard players get @s magnetism_dist

#Y Pos; gets position values, subtracts for distance, then stores to nearby entity current motion
execute store result score @s magnetism_dist run data get entity @s Pos[1] 100
execute as @e[distance=..8,type=!minecraft:player,type=!minecraft:falling_block,type=!#minecraft:arrows,type=!minecraft:fishing_bobber,type=!minecraft:ender_pearl,type=!minecraft:eye_of_ender,type=!minecraft:experience_bottle,type=!minecraft:potion,type=!#minecraft:impact_projectiles,type=!minecraft:firework_rocket,type=!minecraft:llama_spit,type=!minecraft:shulker_bullet,type=!minecraft:painting,type=!minecraft:item_frame,type=!minecraft:area_effect_cloud] store result score @s magnetism_dist run data get entity @s Pos[1] 100
scoreboard players operation @e[distance=..8,type=!minecraft:player,type=!minecraft:falling_block,type=!#minecraft:arrows,type=!minecraft:fishing_bobber,type=!minecraft:ender_pearl,type=!minecraft:eye_of_ender,type=!minecraft:experience_bottle,type=!minecraft:potion,type=!#minecraft:impact_projectiles,type=!minecraft:firework_rocket,type=!minecraft:llama_spit,type=!minecraft:shulker_bullet,type=!minecraft:painting,type=!minecraft:item_frame,type=!minecraft:area_effect_cloud] magnetism_dist -= @s magnetism_dist
execute as @e[distance=..8,type=!minecraft:player,type=!minecraft:falling_block,type=!#minecraft:arrows,type=!minecraft:fishing_bobber,type=!minecraft:ender_pearl,type=!minecraft:eye_of_ender,type=!minecraft:experience_bottle,type=!minecraft:potion,type=!#minecraft:impact_projectiles,type=!minecraft:firework_rocket,type=!minecraft:llama_spit,type=!minecraft:shulker_bullet,type=!minecraft:painting,type=!minecraft:item_frame,type=!minecraft:area_effect_cloud] store result entity @s Motion[1] double -0.002 run scoreboard players get @s magnetism_dist

#Z Pos; gets position values, subtracts for distance, then stores to nearby entity current motion
execute store result score @s magnetism_dist run data get entity @s Pos[2] 100
execute as @e[distance=..8,type=!minecraft:player,type=!minecraft:falling_block,type=!#minecraft:arrows,type=!minecraft:fishing_bobber,type=!minecraft:ender_pearl,type=!minecraft:eye_of_ender,type=!minecraft:experience_bottle,type=!minecraft:potion,type=!#minecraft:impact_projectiles,type=!minecraft:firework_rocket,type=!minecraft:llama_spit,type=!minecraft:shulker_bullet,type=!minecraft:painting,type=!minecraft:item_frame,type=!minecraft:area_effect_cloud] store result score @s magnetism_dist run data get entity @s Pos[2] 100
scoreboard players operation @e[distance=..8,type=!minecraft:player,type=!minecraft:falling_block,type=!#minecraft:arrows,type=!minecraft:fishing_bobber,type=!minecraft:ender_pearl,type=!minecraft:eye_of_ender,type=!minecraft:experience_bottle,type=!minecraft:potion,type=!#minecraft:impact_projectiles,type=!minecraft:firework_rocket,type=!minecraft:llama_spit,type=!minecraft:shulker_bullet,type=!minecraft:painting,type=!minecraft:item_frame,type=!minecraft:area_effect_cloud] magnetism_dist -= @s magnetism_dist
execute as @e[distance=..8,type=!minecraft:player,type=!minecraft:falling_block,type=!#minecraft:arrows,type=!minecraft:fishing_bobber,type=!minecraft:ender_pearl,type=!minecraft:eye_of_ender,type=!minecraft:experience_bottle,type=!minecraft:potion,type=!#minecraft:impact_projectiles,type=!minecraft:firework_rocket,type=!minecraft:llama_spit,type=!minecraft:shulker_bullet,type=!minecraft:painting,type=!minecraft:item_frame,type=!minecraft:area_effect_cloud] store result entity @s Motion[2] double -0.0015 run scoreboard players get @s magnetism_dist

#Particles
execute if predicate magnetism:flame as @e[distance=..8,type=!minecraft:player,type=!minecraft:falling_block,type=!#minecraft:arrows,type=!minecraft:fishing_bobber,type=!minecraft:ender_pearl,type=!minecraft:eye_of_ender,type=!minecraft:experience_bottle,type=!minecraft:potion,type=!#minecraft:impact_projectiles,type=!minecraft:firework_rocket,type=!minecraft:llama_spit,type=!minecraft:shulker_bullet,type=!minecraft:painting,type=!minecraft:item_frame,type=!minecraft:area_effect_cloud] at @s run particle minecraft:flame ~ ~ ~ 0.35 0.6 0.35 0.05 2 normal @a
