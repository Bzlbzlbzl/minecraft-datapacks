execute as @a[nbt={SelectedItem:{tag:{tp-bow:1b}}},scores={tp_bow_use=1}] at @s anchored eyes positioned ^ ^ ^ run tag @e[type=arrow,nbt=!{inGround:1b},distance=..5,tag=!tpProcessed] add nearbyShot
execute as @a[nbt={SelectedItem:{tag:{tp-bow:1b}}},scores={tp_bow_use=1}] at @s anchored eyes positioned ^ ^ ^ run tag @e[type=spectral_arrow,nbt=!{inGround:1b},distance=..5,tag=!tpProcessed] add nearbyShot
execute as @a[nbt={SelectedItem:{tag:{tp-bow:1b}}},scores={tp_bow_use=1}] at @s anchored eyes positioned ^ ^ ^ run tag @e[tag=nearbyShot,limit=1,sort=nearest] add tpShot
execute as @a[nbt={SelectedItem:{tag:{tp-bow:1b}}},scores={tp_bow_use=1}] at @s anchored eyes positioned ^ ^ ^ run execute as @e[tag=tpShot,limit=1,sort=nearest] unless entity @s[type=spectral_arrow] run tag @s add enderpearlArrow
execute as @a[nbt={SelectedItem:{tag:{tp-bow:1b}}},scores={tp_bow_use=1}] at @s anchored eyes positioned ^ ^ ^ run execute as @e[tag=tpShot,limit=1,sort=nearest] unless entity @s[type=arrow] run tag @s add tpArrow
execute as @a[nbt={SelectedItem:{tag:{tp-bow:1b}}},scores={tp_bow_use=1}] at @s anchored eyes positioned ^ ^ ^ run scoreboard players operation @e[tag=tpShot,limit=1,sort=nearest] tp_bow_id = @s tp_bow_id
